
<!DOCTYPE html>
<html>
<head>
<script th:src="@{/ckeditor/ckeditor.js}" type="text/javascript"></script>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Thêm nguyên liệu</title>
<!-- BOOTSTRAP STYLES-->
<link th:href="@{/css/bootstrap.css}" rel="stylesheet" />
<!-- FONTAWESOME STYLES-->
<link th:href="@{/css/font-awesome.css}" rel="stylesheet" />
<!-- MORRIS CHART STYLES-->

<!-- CUSTOM STYLES-->
<link th:href="@{/css/custom.css}" rel="stylesheet" />
<!-- GOOGLE FONTS-->

<link th:href="@{/js/dataTables/dataTables.bootstrap.css}"
	rel="stylesheet" />
</head>
<body>
<div class="modal fade" id="notifyModal">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title">...</h4>
					<button type="button" class="close" data-dismiss="modal">&times;</button>
				</div>
				<div class="modal-body">...</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-danger" data-dismiss="modal">Đóng</button>
				</div>
			</div>
		</div>
	</div>
	<div id="wrapper">
		<div th:replace="/admin/nav-bar :: nav_bar"></div>
		<!-- /. NAV TOP  -->
		<div th:replace="/admin/slide-bar :: slide_bar"></div>
		<!-- /. NAV SIDE  -->
		<div id="page-wrapper">
			<div id="page-inner">
				<div class="row">
					<div class="col-md-12">
						<h2>Thêm bài viết</h2>

					</div>
				</div>
				<!-- /. ROW  -->
				<hr />
				<div class="row">
					<div class="col-md-12">
						<!-- Form Elements -->
						<div class="panel panel-default">
							<div class="panel-heading">Thêm nguyên liệu</div>
							<div class="panel-body">
								<div class="row">
									<div class="col-md-6">
										<h3>Thông tin nguyên liệu</h3>

										<form role="form" id="form" th:action="@{/admin/resource/insert}" method="post" >

											<div class="form-group">
												<label>Tên nguyên liệu:</label> <input class="form-control"
													placeholder="Tên nguyên liệu" name="resourceName" id="resourceName" />
											</div>

											<div class="form-group">
												<label>Mô tả</label> <input class="form-control"
													placeholder="Mô tả" name="resourceDescription" id="resourceDescription" />
											</div>
											<div class="form-group">
												<label>Hình ảnh</label> <input class="form-control" type="file"
													placeholder="gram" name="imageFile"  id="imageFile"  accept="image/*"/>
											</div>
											<div class="form-group">
												<label>Lượng calo trên 1g</label> <input
													class="form-control" placeholder="gram" name="kcal1g" id="kcal1g" />
											</div>
											<div class="form-group">
												<label>CategoryId</label> <select  id="category">
													<option class="form-control" th:each="cat: ${categoryList}"
														th:value="${cat.id}" th:text="${cat.categoryName}"></option>
												</select>
											</div>

											<button type="submit" class="btn btn-default">Thêm
												nguyên liệu</button>
											<button type="reset" class="btn btn-primary">Làm mới</button>
										</form>


									</div>
								</div>
							</div>
						</div>
						<!-- End Form Elements -->
					</div>
				</div>
				<!-- /. ROW  -->
				<div class="row">
					<div class="col-md-12"></div>
				</div>
				<!-- /. ROW  -->
			</div>
			<!-- /. PAGE INNER  -->
		</div>
		<!-- /. PAGE WRAPPER  -->
	</div>
	<!-- /. WRAPPER  -->
	<!-- SCRIPTS -AT THE BOTOM TO REDUCE THE LOAD TIME-->
	<!-- JQUERY SCRIPTS -->
	<script th:src="@{/js/jquery-1.10.2.js}"></script>
	<!-- BOOTSTRAP SCRIPTS -->
	<script th:src="@{/js/bootstrap.min.js}"></script>
	<!-- METISMENU SCRIPTS -->
	<script th:src="@{/js/jquery.metisMenu.js}"></script>
	<!-- DATA TABLE SCRIPTS -->
	<script th:src="@{/js/dataTables/jquery.dataTables.js}"></script>
	<script th:src="@{/js/dataTables/dataTables.bootstrap.js}"></script>
	<script type="text/javascript">
            $(document).ready(function () {
                $('#dataTables-example').dataTable();
            });
            $("#form").submit(function (e) {
    		    e.preventDefault();
    		    var productName = $("#resourceName").val();
    		    var productDescription = $("#resourceDescription").val();
    		    var imageFile = $('#imageFile')[0].files[0];
    		    var id =$("#kcal1g").val();
    		    
    		    var cate =$("#category").val();
    		   
    		    var form_data = new FormData();
    		    form_data.append('resourceName', productName);
    		    form_data.append('resourceDescription', productDescription);
    		    form_data.append('file', imageFile);
    		    form_data.append('kcal1g', id);
    		    form_data.append('category',cate );
    		    console.log(123)
    			$.ajax({
    				url: document.location.origin + "/admin/resource/insert",
    				type: 'POST',
    				cache: false,
    		        processData: false,
    		        contentType: false,
    		        data: form_data,
    				success: function () {
    					 notify("Thông báo", "Thêm nguyên liệu thành công");
    				},
    				error: function () {
    					notify("Lỗi", "Không thể xử lí dữ liệu");
    				}
    			});
    			return false;
    		});
    	function notify(title, message) {
    	    $("#notifyModal .modal-title").html(title);
    	    $("#notifyModal .modal-body").html(message);
    	    $("#notifyModal").modal({ backdrop: "static" });
    	}
        </script>
	<!-- CUSTOM SCRIPTS -->
	<!--        <script th:src="../static/js/custom.js"></script>-->
</body>
</html>